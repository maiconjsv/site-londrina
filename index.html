<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="src/index.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    
</head>
<body>
    <header>
        <div id="headerbar" class="headerBarOn">
            <div id="menuButton"><span class="material-symbols-outlined">menu</span></div>
            <div id="logo">
                <h2>O que fazer em Londrina?</h2>
            </div>
        </div>
        <div id="descobrir">
            <div id="descobrirButton">
                Descobrir
            </div>
        </div>
    </header>
<!-- Slider main container -->
<div class="swiper">
  <!-- Additional required wrapper -->
  <div class="swiper-wrapper">
    <!-- Slides -->
    <div class="swiper-slide" id="slide1">
        <div class="slideText">
            <div class="descobrirSlide">
              <h1>Eventos</h1>
              <div class="slideButton" id="slide1Button">Descobrir</div>
            </div>
        </div>
    </div>
    <div class="swiper-slide" id="slide2">
      <div class="slideText">
        <div class="descobrirSlide">
          <h1>Ecoturismo</h1>
          <div class="slideButton" id="slide2Button">Descobrir</div>
        </div>
      </div>
    </div>
    <div class="swiper-slide" id="slide3">
      <div class="slideText">
        <div class="descobrirSlide">
          <h1>Gastronomia</h1>
          <div class="slideButton" id="slide3Button">Descobrir</div>
        </div>
      </div>
    </div>
    <div class="swiper-slide" id="slide4">
      <div class="slideText">
        <div class="descobrirSlide">
          <h1>Pra Familia</h1>
          <div class="slideButton" id="slide4Button">Descobrir</div>
        </div>
      </div>
    </div>
        <div class="swiper-slide" id="slide5">
      <div class="slideText">
        <div class="descobrirSlide">
          <h1>História e museus</h1>
          <div class="slideButton" id="slide5Button">Descobrir</div>
        </div>
      </div>
    </div>
        <div class="swiper-slide" id="slide6">
      <div class="slideText">
        <div class="descobrirSlide">
          <h1>Feiras</h1>
          <div class="slideButton" id="slide6Button">Descobrir</div>
        </div>
      </div>
    </div>
  </div>
  <!-- If we need pagination -->
  <div class="swiper-pagination"></div>

  <!-- If we need navigation buttons -->
  <div class="swiper-button-prev"></div>
  <div class="swiper-button-next"></div>

  <!-- If we need scrollbar -->
  <div class="swiper-scrollbar"></div>
</div>

<main>
  <div class="divContent" id="eventos">
    <h2>Próximos eventos até <br>o final do ano</h2>
    <div id="lista-eventos">
      <ul id="ulEvent">
      </ul>
    </div>
  </div>
  <div class="divContent" id="ecoTurismo">
   
  </div>
  <div class="divContent" id="">
   
  </div>
  <div class="divContent" id="gastronomia">
   
  </div>
  <div class="divContent" id="familia">
   
  </div>
  <div class="divContent" id="historiaEmuseus">
   
  </div>
  <div class="divContent" id="feiras">
    <h1>Conheça as feiras</h1>
    <p id="pFeira1">Nada como se perder em um feira recheada de sensações e sabores</p>
    <img src="src/media/feira2.jpg" id="img1" alt="pessoas andando em uma feira">
    <p id="pFeira2">Acesse o link a baixo e descubra as melhores feiras em Londrina</p>
    <img id="img2" src="src/media/feira3.png" alt="um mapa com feiras">
    <div id="mapFeiras">
       Mapa de feiras<span id="touch" class="material-symbols-outlined">touch_app</span>
    </div>
  </div>
</main>
<footer> <small>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quidem, eos voluptate quis nam fuga dolorem quam quibusdam alias perferendis dolor! Repellat et quaerat esse? Laudantium quaerat nesciunt deleniti ea ut.</small></footer>


<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="src/index.js"></script>
<script type="module">
 import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
 import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCIjEKrjRLlzxMDEs6kyguaWfIhAIO7OKs",
  authDomain: "londrina-o-que-fazer.firebaseapp.com",
  projectId: "londrina-o-que-fazer",
  storageBucket: "londrina-o-que-fazer.firebasestorage.app",
  messagingSenderId: "954487488195",
  appId: "1:954487488195:web:609a82d73ba8bd50202c76"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const ulEvent = document.getElementById('ulEvent');
const hoje = new Date();

// Função que converte "DD/MM/YYYY" para objeto Date
function parseDataBrasileira(dataStr) {
  const [dia, mes, ano] = dataStr.split('/');
  return new Date(`${ano}-${mes}-${dia}`);
}

const eventosRef = collection(db, "eventos");
const eventosQuery = query(eventosRef, orderBy("data"));

onSnapshot(eventosQuery, (snapshot) => {
  ulEvent.innerHTML = "";
  let temEvento = false;

  snapshot.forEach(doc => {
    const dados = doc.data();
    const dataEvento = parseDataBrasileira(dados.data);

    if (dataEvento >= hoje) {
      temEvento = true;
      const li = document.createElement("li");
      li.innerHTML = `<a href="https://${dados.link}" target="_blank">
        <strong>${dados.nome} </strong> – ${dados.data}
     <span id="touch" class="material-symbols-outlined">touch_app</span></a>`;
      ulEvent.appendChild(li);
    }
  });

  if (!temEvento) {
    eventosLista.innerHTML = "<li>Sem eventos futuros no momento.</li>";
  }
});

</script>

<script type="module">
    import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs'

    const swiper = new Swiper('.swiper', {
  // Optional parameters
  direction: 'horizontal',
  loop: true,

  // If we need pagination
  pagination: {
    el: '.swiper-pagination',
  },

  // Navigation arrows
  navigation: {
    nextEl: '.swiper-button-next',
    prevEl: '.swiper-button-prev',
  },

  // And if we need scrollbar
  scrollbar: {
    el: '.swiper-scrollbar',
  },
 
});
</script>
</body>
</html>